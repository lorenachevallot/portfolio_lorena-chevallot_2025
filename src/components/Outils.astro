---
import Figma from "../assets/figma.svg";
import Canvas from "../assets/canvas.svg";
import Trello from "../assets/trello.svg";
import Notion from "../assets/notion.svg";
import Fimora from "../assets/filmora.svg";
import Drive from "../assets/drive.svg";
import Chatgpt from "../assets/chatgpt.svg";
import Claude from "../assets/claude.svg";
import Davinci from "../assets/davinci.svg";
import GanttProject from "../assets/ganttproject.svg";
import Vscode from "../assets/vscode.svg";
import Github from "../assets/github.svg";
import Miro from "../assets/miro.svg";
import Wordpress from "../assets/wordpress.svg";
import Illustrator from "../assets/illustrator.svg";

const tools = [
    { name: "Figma", icon: Figma },
    { name: "Illustrator", icon: Illustrator },
    { name: "WordPress", icon: Wordpress },
    { name: "Notion", icon: Notion },
    { name: "Canva", icon: Canvas },
    { name: "Filmora", icon: Fimora },
    { name: "Trello", icon: Trello },
    { name: "Drive", icon: Drive },
    { name: "Chat GPT", icon: Chatgpt },
    { name: "Da Vinci", icon: Davinci },
    { name: "Gantt Projet", icon: GanttProject },
    { name: "Miro", icon: Miro },
    { name: "VS Code", icon: Vscode },
    { name: "GitHub", icon: Github },
    { name: "Claude", icon: Claude },
];
---

<section
    id="outils"
    class="relative text-white px-4 md:px-8 lg:px-16 py-24 md:py-20 lg:py-23"
>
    <div class="w-full">
        <!-- Titre de la section -->
        <div class="mb-3 lg:mb-4 w-full max-w-[700px] lg:max-w-[1200px]">
            <h2>Outils</h2>
        </div>

        <!-- Ligne décorative -->
        <div class="mb-8 lg:mb-10 w-full max-w-[700px] lg:max-w-[1200px]">
            <div
                class="h-0.5 bg-white mb-4 w-full"
                style="box-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.6);"
            >
            </div>
        </div>

        <!-- Grid des outils avec néon -->
        <div class="w-full max-w-[1200px] mx-auto relative">
            <div class="neon-bar-container">
                <div class="neon-bar"></div>
            </div>

            <div
                class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 md:gap-8 lg:gap-10 content-container"
            >
                {
                    tools.map((tool) => (
                        <div class="flex flex-col items-center justify-center gap-4 p-6 bg-gradient-to-br from-zinc-900/50 to-zinc-950/50 rounded-2xl backdrop-blur-sm border border-white/10 hover:border-violet-500/30 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-violet-500/20">
                            <div class="w-6 h-6 md:w-8 md:h-8 lg:w-10 lg:h-10 flex items-center justify-center">
                                <img
                                    src={tool.icon.src}
                                    alt={tool.name}
                                    class="w-full h-full object-contain filter drop-shadow-[0_0_8px_rgba(139,92,246,0.3)]"
                                />
                            </div>
                            <span class="text-xs md:text-sm lg:text-base text-center text-zinc-200 font-medium">
                                {tool.name}
                            </span>
                        </div>
                    ))
                }
            </div>
        </div>
    </div>
</section>

<style>
    /* Masquer le contenu au chargement en version lg */
    @media (min-width: 1024px) {
        .content-container {
            opacity: 0;
        }

        .content-container.revealed {
            animation: fadeIn 0.6s ease-out forwards;
        }
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .neon-bar-container {
        position: absolute;
        top: 0;
        left: -80px;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        pointer-events: none;
        z-index: 1;
        transform: translateX(0);
    }

    /* Animation de déplacement du néon en version lg */
    @media (min-width: 1024px) {
        .neon-bar-container {
            animation: neonTravelHorizontal 3s cubic-bezier(0.4, 0, 0.2, 1)
                forwards;
        }
    }

    @keyframes neonTravelHorizontal {
        0% {
            transform: translateX(0);
        }
        50% {
            transform: translateX(calc(100vw + 80px));
        }
        100% {
            transform: translateX(0);
        }
    }

    .neon-bar {
        width: 8px;
        height: 100%;
        background: linear-gradient(
            to right,
            transparent,
            rgba(255, 255, 255, 0.9) 45%,
            #ffffff 50%,
            rgba(255, 255, 255, 0.9) 55%,
            transparent
        );
        position: relative;
        border-radius: 4px;

        /* Effet néon principal */
        box-shadow: 
            /* Halo intérieur blanc */
            inset 0 0 10px rgba(255, 255, 255, 0.9),
            inset 0 0 20px rgba(255, 255, 255, 0.6),
            /* Première couche de lueur bleue */ 0 0 10px #3600c9,
            0 0 20px #3600c9,
            0 0 30px #3600c9,
            0 0 40px #3600c9,
            /* Deuxième couche plus diffuse */ 0 0 60px rgba(54, 0, 201, 0.8),
            0 0 80px rgba(54, 0, 201, 0.6),
            0 0 100px rgba(54, 0, 201, 0.4),
            /* Halo très diffus */ 0 0 140px rgba(54, 0, 201, 0.3),
            0 0 180px rgba(54, 0, 201, 0.2);
    }

    /* Pulsation du néon après l'animation */
    @media (min-width: 1024px) {
        .neon-bar {
            animation: neon-pulse 2s ease-in-out 3s infinite alternate;
        }
    }

    @media (max-width: 1023px) {
        .neon-bar {
            animation: neon-pulse 2s ease-in-out infinite alternate;
        }
    }

    /* Animation de pulsation pour un effet plus réaliste */
    @keyframes neon-pulse {
        0% {
            box-shadow:
                inset 0 0 10px rgba(255, 255, 255, 0.9),
                inset 0 0 20px rgba(255, 255, 255, 0.6),
                0 0 10px #3600c9,
                0 0 20px #3600c9,
                0 0 30px #3600c9,
                0 0 40px #3600c9,
                0 0 60px rgba(54, 0, 201, 0.8),
                0 0 80px rgba(54, 0, 201, 0.6),
                0 0 100px rgba(54, 0, 201, 0.4),
                0 0 140px rgba(54, 0, 201, 0.3),
                0 0 180px rgba(54, 0, 201, 0.2);
        }
        100% {
            box-shadow:
                inset 0 0 12px rgba(255, 255, 255, 1),
                inset 0 0 24px rgba(255, 255, 255, 0.7),
                0 0 15px #3600c9,
                0 0 25px #3600c9,
                0 0 35px #3600c9,
                0 0 50px #3600c9,
                0 0 70px rgba(54, 0, 201, 0.9),
                0 0 90px rgba(54, 0, 201, 0.7),
                0 0 120px rgba(54, 0, 201, 0.5),
                0 0 160px rgba(54, 0, 201, 0.4),
                0 0 200px rgba(54, 0, 201, 0.3);
        }
    }
</style>

<script>
    // Animation uniquement pour la version desktop (lg)
    if (window.innerWidth >= 1024) {
        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        // Révéler le contenu pendant que le néon revient (après 1.8s)
                        setTimeout(() => {
                            const contentContainer = document.querySelector(
                                "#outils .content-container",
                            ) as HTMLElement;

                            if (contentContainer) {
                                contentContainer.classList.add("revealed");
                            }
                        }, 1800);

                        // Ne plus observer après la première animation
                        observer.disconnect();
                    }
                });
            },
            {
                threshold: 0.2,
            },
        );

        const section = document.querySelector("#outils");
        if (section) {
            observer.observe(section);
        }
    } else {
        // Pour mobile/tablette, afficher le contenu immédiatement
        const contentContainer = document.querySelector(
            "#outils .content-container",
        ) as HTMLElement;

        if (contentContainer) {
            contentContainer.style.opacity = "1";
        }
    }
</script>
